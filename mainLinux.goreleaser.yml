version: 1

before:
  hooks:
  - sudo apt-get update -y
  - sudo apt-get install -y gcc-aarch64-linux-gnu binutils-aarch64-linux-gnu
  
builds:
  - main: ./cmd/tester/main.go
    binary: tester
    env:
      - CGO_ENABLED=1
      - CC_linux_arm64=aarch64-linux-gnu-gcc
      - 'CC={{ index .Env (print "CC_" .Os "_" .Arch) }}'
    goarch: [amd64, arm64]
    goos: [linux]

archives:
  - name_template: "{{ .Tag }}_{{ .Os }}_{{ .Arch }}"
    format: tar.gz
    files:
      - test.sh
      - custom_executable

checksum:
  split: true
